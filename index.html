<!doctype html>
<html lang="ca">
<head>
  <link rel="icon" href="/favicon.ico">

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>L'Hora — Guia ràpida</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Rubik:wght@400;600;700&display=swap');
    :root {
      --bg: #0e1117;
      --surface: #161b22;
      --accent: #58a6ff;
      --muted: #8b949e;
      --text: #c9d1d9;
      --glass: rgba(255,255,255,0.03);
    }
    * {box-sizing: border-box;}
    body {
      margin: 0;
      font-family: 'Rubik', system-ui, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
    }
    header {
      text-align: center;
      padding: 40px 20px 20px;
    }
    h1 {
      margin: 0;
      font-size: clamp(2rem, 5vw, 3rem);
      font-weight: 700;
      color: var(--accent);
    }
    .lead {
      margin-top: 10px;
      font-size: 1.1rem;
      color: var(--muted);
    }
    main {
      max-width: 900px;
      margin: 0 auto;
      padding: 0 20px 60px;
    }
    section {
      background: var(--surface);
      border-radius: 16px;
      padding: 28px;
      margin-top: 28px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.4);
      transition: transform 0.2s ease;
    }
    section:hover {
      transform: translateY(-3px);
    }
    h2 {
      margin-top: 0;
      font-size: 1.6rem;
      color: var(--accent);
    }
    h3 {
      margin-top: 24px;
      font-size: 1.2rem;
      color: var(--accent);
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 12px;
      overflow-x: auto;
      display: block;
    }
    th, td {
      padding: 12px 14px;
      border-bottom: 1px solid rgba(255,255,255,0.07);
    }
    th {
      text-align: left;
      color: var(--muted);
      font-weight: 600;
      background: rgba(255,255,255,0.02);
    }
    td.example {
      font-weight: 700;
      color: #fff;
    }
    .muted { color: var(--muted); font-size: 0.95rem; }
    footer {
      text-align: center;
      margin: 40px auto 10px;
      font-size: 0.85rem;
      color: var(--muted);
    }

    /* --- nous estils per rellotge i input --- */
    .clock {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      flex-wrap: wrap;
      margin-bottom: 14px;
    }
    .clock .now {
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--text);
      background: var(--glass);
      padding: 10px 14px;
      border-radius: 12px;
    }
    .controls {
      display: flex;
      gap: 8px;
      align-items: center;
      flex-wrap: wrap;
      margin-top: 12px;
    }
    input[type="text"] {
      background: rgba(255,255,255,0.02);
      border: 1px solid rgba(255,255,255,0.04);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 10px;
      min-width: 140px;
      font-size: 0.95rem;
    }
    button {
      background: linear-gradient(180deg, rgba(88,166,255,0.14), rgba(88,166,255,0.08));
      border: 1px solid rgba(88,166,255,0.16);
      color: var(--accent);
      padding: 10px 14px;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
    }
    #resultat {
      margin-top: 10px;
      font-weight: 700;
      color: #fff;
    }

    @media (max-width: 600px) {
      section { padding: 20px; }
      th, td { padding: 10px; font-size: 0.9rem; }
      .clock { flex-direction: column; align-items: flex-start; }
    }
  </style>
</head>
<body>
  <header>
    <h1>L'Hora</h1>
    <p class="lead">Guia ràpida d'expressions habituals per dir l'hora en català</p>
  </header>
  <main>
    <section>
      <!-- Rellotge en viu afegit al cos original -->
      <div class="clock" aria-hidden="false">
        <div class="now" id="hora" aria-live="polite">Carregant...</div>
        <div class="muted">Hora local del dispositiu</div>
      </div>

      <h2>Formes comunes</h2>
      <table>
        <thead>
          <tr><th>Temps</th><th>Formes</th><th>Notes / exemple</th></tr>
        </thead>
        <tbody>
          <tr>
            <td class="example">x:00 h</td>
            <td>Les x en punt</td>
            <td class="muted">(–1 / +1) — «Les 3 en punt»</td>
          </tr>
          <tr>
            <td class="example">x:15 h</td>
            <td>Un quart de (hora següent)</td>
            <td class="muted">«Un quart de 4» → 3:15</td>
          </tr>
          <tr>
            <td class="example">x:30 h</td>
            <td>Dos quarts de (hora següent)</td>
            <td class="muted">«Dos quarts de 4» → 3:30</td>
          </tr>
          <tr>
            <td class="example">x:45 h</td>
            <td>Tres quarts de (hora següent)</td>
            <td class="muted">«Tres quarts de 4» → 3:45</td>
          </tr>
        </tbody>
      </table>
      <h3>Variants amb «mig quart» i «ben passat»</h3>
      <table>
        <tbody>
          <tr>
            <td>+02-04 min</td>
            <td>Les x tocades / x quarts tocats de</td>
          </tr>
          <tr>
            <td>+05-06 min</td>
            <td>Les x ben tocades / x quarts ben tocats de</td>
          </tr>
          <tr>
            <td>+07-08 min</td>
            <td>Mig quart de / x quarts i mig de</td>
          </tr>
          <tr>
            <td>+09-11 min</td>
            <td>Mig quart passat de / x quarts i mig passats de</td>
          </tr>
          <tr>
            <td>+12-13 min</td>
            <td>Mig quart ben passat de / x quarts i mig ben passats de</td>
          </tr>
        </tbody>
      </table>
      <p class="muted">Nota: «x» indica l'hora de referència. En expressions com «un quart de…» s'empra l'hora següent («un quart de 4» = 3:15).</p>
    </section>

    <!-- Nova secció: provar manualment -->
    <section>
      <h2>Prova la teva hora</h2>
      <p class="muted">Introdueix una hora (ex.: <code>14:47</code>, <code>1447</code> o <code>7:05</code>).</p>
      <div class="controls" role="region" aria-label="Prova la teva hora">
        <input id="entradaHora" type="text" placeholder="Ex: 14:47 o 1447" aria-label="Entrada d'hora">
        <button id="btnConvertir" type="button">Convertir</button>
        <button id="btnClear" type="button" title="Esborra">Esborra</button>
      </div>
      <div id="resultat" aria-live="polite"></div>
    </section>

  </main>
  <footer>
    Contingut transcrit a partir del PDF original. Fet per a GitHub Pages.
  </footer>

  <script>
    // ---- funció que converteix hores a català (més completa) ----
    function horaCatala(h, m) {
      // validar
      if (h < 0 || h > 23 || m < 0 || m > 59) return "Hora invàlida";

      const properaHora = (h + 1) % 24;
      const hores = [
        "dotze", "una", "dues", "tres", "quatre", "cinc",
        "sis", "set", "vuit", "nou", "deu", "onze"
      ];
      function nomHora(x) {
        return hores[x % 12];
      }

      // casos exactes
      if (m === 0) return `Les ${nomHora(h)} en punt`;
      if (m === 15) return `Un quart de ${nomHora(properaHora)}`;
      if (m === 30) return `Dos quarts de ${nomHora(properaHora)}`;
      if (m === 45) return `Tres quarts de ${nomHora(properaHora)}`;

      // entre les hores i el primer quart
      if (m > 0 && m < 15) {
        if (m <= 4) return `Les ${nomHora(h)} tocades`;
        if (m <= 6) return `Les ${nomHora(h)} ben tocades`;
        if (m <= 8) return `Mig quart de ${nomHora(properaHora)}`;
        if (m <= 11) return `Mig quart passat de ${nomHora(properaHora)}`;
        return `Mig quart ben passat de ${nomHora(properaHora)}`;
      }

      // entre quart i dos quarts
      if (m > 15 && m < 30) {
        const delta = m - 15;
        if (delta <= 4) return `Un quart tocat de ${nomHora(properaHora)}`;
        if (delta <= 6) return `Un quart ben tocat de ${nomHora(properaHora)}`;
        if (delta <= 8) return `Mig quart de ${nomHora(properaHora)}`;
        if (delta <= 11) return `Mig quart passat de ${nomHora(properaHora)}`;
        return `Mig quart ben passat de ${nomHora(properaHora)}`;
      }

      // entre dos quarts i tres quarts
      if (m > 30 && m < 45) {
        const delta = m - 30;
        if (delta <= 4) return `Dos quarts tocats de ${nomHora(properaHora)}`;
        if (delta <= 6) return `Dos quarts ben tocats de ${nomHora(properaHora)}`;
        if (delta <= 8) return `Dos quarts i mig de ${nomHora(properaHora)}`;
        if (delta <= 11) return `Dos quarts i mig passats de ${nomHora(properaHora)}`;
        return `Dos quarts i mig ben passat de ${nomHora(properaHora)}`;
      }

      // entre tres quarts i l’hora en punt següent
      if (m > 45) {
        const delta = m - 45;
        if (delta <= 4) return `Tres quarts tocats de ${nomHora(properaHora)}`;
        if (delta <= 6) return `Tres quarts ben tocats de ${nomHora(properaHora)}`;
        if (delta <= 8) return `Tres quarts i mig de ${nomHora(properaHora)}`;
        if (delta <= 11) return `Tres quarts i mig passats de ${nomHora(properaHora)}`;
        return `Tres quarts i mig ben passat de ${nomHora(properaHora)}`;
      }

      // fallback (no hauria de passar)
      return `${h}:${m < 10 ? "0" + m : m}`;
    }

    // ---- actualitzar el rellotge en viu ----
    function actualitzarHora() {
      const ara = new Date();
      const h = ara.getHours();
      const m = ara.getMinutes();
      const txt = horaCatala(h, m);
      document.getElementById("hora").innerText = txt;
    }
    setInterval(actualitzarHora, 1000);
    actualitzarHora();

    // ---- utilitats per convertir entrada de l'usuari ----
    function parseHoraInput(text) {
      if (!text) return null;
      text = text.trim();
      // accepta formats: HH:MM, H:MM, HHMM, HMM
      if (/^\d{1,2}:\d{2}$/.test(text)) {
        const [hh, mm] = text.split(":").map(Number);
        return {h: hh, m: mm};
      }
      if (/^\d{3,4}$/.test(text)) {
        const n = text.length;
        const hh = Number(text.slice(0, n - 2));
        const mm = Number(text.slice(n - 2));
        return {h: hh, m: mm};
      }
      return null;
    }

    document.getElementById("btnConvertir").addEventListener("click", () => {
      const raw = document.getElementById("entradaHora").value;
      const parsed = parseHoraInput(raw);
      const out = document.getElementById("resultat");
      if (!parsed) {
        out.innerText = "Format incorrecte — escriu HH:MM o HHMM (ex: 14:47 o 1447)";
        return;
      }
      const {h, m} = parsed;
      if (isNaN(h) || isNaN(m) || h < 0 || h > 23 || m < 0 || m > 59) {
        out.innerText = "Hora invàlida";
        return;
      }
      out.innerText = horaCatala(h, m);
    });

    document.getElementById("btnClear").addEventListener("click", () => {
      document.getElementById("entradaHora").value = "";
      document.getElementById("resultat").innerText = "";
      document.getElementById("entradaHora").focus();
    });

    // suport per fer Enter dins l'input
    document.getElementById("entradaHora").addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        document.getElementById("btnConvertir").click();
      }
    });
  </script>
</body>
</html>
